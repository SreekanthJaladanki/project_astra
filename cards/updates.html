
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Updates</title>
   <link rel="stylesheet" href="../cards/updates.css">
</head>

<body>
    <div class="container">
        <h1>Daily Updates</h1>
        <div class="row">
            <label for="selectDate" id="datelabel">Select Date:</label>
            <input type="date" id="selectDate" name="selectDate" required>
            <label for="employee">Employee:</label>
            <select id="employee" required>
                <option value="0">--Select Employee--</option>
                <option value="trainer">Trainer</option>
                <option value="trainee">Trainee</option>
            </select>
            <label for="task">Task:</label>
            <select id="task" required>
                <option value="0">--Select Task--</option>
                <option value="kt">KT</option>
                <option value="Onlineclass">Onlineclass</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
            </select>
            <button onclick="addTask()">Add Task</button>
        </div>
        <div id="addedTasks"></div>
        <button onclick="submitForm()" id="submitbutn">Submit Form</button>
    </div>
    <div id="errorMessage" style="color: red; display: none;">Please fill in all fields.</div>

    <script>
        function addTask() {
            const employeeSelect = document.getElementById("employee");
            const taskSelect = document.getElementById("task");
            const selectedEmployee = employeeSelect.value;
            const selectedTask = taskSelect.value;

            const addedTasksContainer = document.getElementById("addedTasks");
            const taskRow = document.createElement("div");
            taskRow.classList.add("task-row");

            const employeeInput = document.createElement("input");
            employeeInput.type = "text";
            employeeInput.classList.add("input-1")
            employeeInput.value = selectedEmployee;
            employeeInput.readOnly = true;
            taskRow.appendChild(employeeInput);

            const taskInput = document.createElement("input");
            taskInput.type = "text";
            taskInput.classList.add("input-2");
            taskInput.value = selectedTask;
            taskInput.readOnly = true;
            taskRow.appendChild(taskInput);

            if (selectedTask === "Onlineclass") {
                const batchesSelect = document.createElement("select");
                batchesSelect.name = "batches";
                batchesSelect.classList.add("batches-select");
                const optionValues = ["--Select Batches--", 1, 2, 3, 4, 5];
                optionValues.forEach((value) => {
                    const option = document.createElement("option");
                    option.value = value;
                    option.textContent = value;
                    batchesSelect.appendChild(option);
                });
                taskRow.appendChild(batchesSelect);
            }

            const removeButton = document.createElement("span");
            removeButton.classList.add("remove-task");
            removeButton.innerHTML = "&#10060;";
            removeButton.onclick = function () {
                taskRow.remove();
            };
            taskRow.appendChild(removeButton);

            addedTasksContainer.appendChild(taskRow);
        }

        function submitForm() {
            const selectDate = document.getElementById("selectDate");
            const employee = document.getElementById("employee");
            const task = document.getElementById("task");
            console.log(task)

            const addedTasksContainer = document.getElementById("addedTasks");
            const taskRows = addedTasksContainer.getElementsByClassName("task-row");
            let tasks = "";

            for (let i = 0; i < taskRows.length; i++) {
                const row = taskRows[i];
                const task = row.children[1].value;
                // console.log(task)
                console.log(row.children[2].value)
                const batches = task === "Onlineclass" ? row.children[2].value : null;
                tasks = (row.children[2].value)

            }

            if (!selectDate.value || employee.value == 0 || !employee.value || !task.value || task.value == 0 || tasks == "--Select Batches--") {
                alert("Please fill in all fields.");
                event.preventDefault(); // Prevent form submission if fields are missing
            } else {

                alert("Form submitted successfully!");
            }
        }
    </script>
</body>

</html>

